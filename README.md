# Система слоёв для CMake генератора

## Концепция

Вместо сложной системы патчей с JSON, используем простую и понятную систему слоёв:

```
layers/
├── 00_base/           # Базовый слой - минимальная структура
├── 01_app_support/    # Слой поддержки приложения
├── 02_static_lib/     # Слой статической библиотеки
├── 03_shared_lib/     # Слой динамической библиотеки
├── 04_unit_tests/     # Слой unit тестов
├── 05_functional_tests/ # Слой функциональных тестов
├── 06_doxygen/        # Слой документации
└── 07_packaging/      # Слой упаковки
```

## Принцип работы

### Ключевая особенность: каждый слой - ПОЛНАЯ копия проекта

1. **Базовый слой** - копия template с минимальной структурой
2. **Функциональные слои** - каждый слой содержит ПОЛНУЮ копию проекта + свою функциональность
3. **Независимость** - слои можно применять в любом порядке, они не зависят друг от друга
4. **Конфигурирование** - подстановка переменных в каждом слое

## Преимущества

- ✅ **Простота разработки** - каждый слой в отдельной папке
- ✅ **Легко найти и исправить** - конкретную функциональность
- ✅ **Наглядность** - видно что добавляет каждый слой
- ✅ **Гибкость** - слои можно комбинировать в любом порядке
- ✅ **Независимость** - unit тесты БЕЗ приложения, приложение БЕЗ тестов
- ✅ **Конфигурирование** - каждый слой может иметь свои переменные

## Примеры использования

```cmake
# 1. Только базовая библиотека
generate_project_from_layers("00_base")

# 2. Библиотека + приложение
generate_project_from_layers("00_base;01_app_support")

# 3. Библиотека + unit тесты (БЕЗ приложения!)
generate_project_from_layers("00_base;04_unit_tests")

# 4. Полный проект
generate_project_from_layers("00_base;01_app_support;02_static_lib;03_shared_lib;04_unit_tests;05_functional_tests;06_doxygen;07_packaging")
```

## Структура слоя

Каждый слой содержит:
- `CMakeLists.txt` - основной файл проекта
- `src/` - исходный код
- `include/` - заголовочные файлы
- `cmake/` - CMake модули
- Дополнительные файлы специфичные для слоя

## Система применения

1. **Определение слоёв** - на основе опций CMake
2. **Копирование файлов** - из выбранных слоёв в генерируемую директорию
3. **Конфигурирование** - подстановка переменных (@OPTION_PROJECT_NAME@ и т.д.)
4. **Генерация** - готовый проект 